<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Feature Policy: max-downscaling-image example</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans">
  <link rel="stylesheet" href="/styles/main.css">
  <link rel="stylesheet" href="/styles/header.css">
</head>
<body class="body-padding">

<details class="details">
  <!-- filled dynamically -->
</details>

<h2 id="feature-allowed-banner">
  <span id="allowfeature">...</span>
</h2>

<p>Click the disallow/allow buttons above to see how the page loads with the policy on and off.
  When the policy is on, you will see images whose intrinsic dimentions that are much larger
  than the container size.</p>

<!--
For optimized images:
1. max-downscaling-image on: image will be rendered accurately.
2. max-downscaling-image off: image will be rendered accurately.

For images with exeeds maximum downscaling threshold:
1. max-downscaling-image on: image will be rendered accurately.
2. max-downscaling-image off: image will be rendered in inverted color.
-->

<div class="center">
  <img src="../img/Fisher-large-stripped.jpg" width="200" height="150">
  <p class="center">
  Image intrinsic size: 200px x 150px <br />
  Image container size: 200px x 150px
  </p>
</div>

<div class="center">
  <img src="../img/Fisher-large-stripped.jpg" width="80" height="150">
  <p class="center">
  Image intrinsic size: 200px x 150px <br />
  Image container size: 80px x 150px
  </p>
</div>

<div class="center">
  <img src="../img/Fisher-large-stripped.jpg" width="200" height="70">
  <p class="center">
  Image intrinsic size: 200px x 150px <br />
  Image container size: 200px x 70px
  </p>
</div>

<div class="center">
  <img src="../img/Fisher-large-stripped.jpg" width="80" height="70">
  <p class="center">
  Image intrinsic size: 200px x 150px <br />
  Image container size: 80px x 70px
  </p>
</div>

<script type="module">
import * as shared from '/js/shared.js';

shared.initPage();

// https://chromium.googlesource.com/chromium/src.git/+/832440db5c586d1bdeedfd01489e43d09de36aa9
// console.log('Allowed features:', document.policy.allowedFeatures());
//document.policy.allowsFeature('unsized-images')
// document.policy.allowsFeature('geolocation', 'https://google-developers.appspot.com/')
// console.log('who can use geolocation', document.policy.getAllowlistForFeature('geolocation'));
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-120357238-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-120357238-1');
</script>
</body>
</html>
